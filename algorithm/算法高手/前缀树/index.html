<script>
    class Trie {
        constructor() {
            this.children = {}
        }

        insert(str) {
            let node = this.children
            for (const c of str) {
                if (!node[c]) {
                    node[c] = {}
                }
                node = node[c]
            }
            node.isEnd = true
        }

        search(str) {
            const res = this.searchPro(str)
            return !!res && !!res.isEnd
        }

        searchPro(str) {
            let node = this.children
            for (const c of str) {
                if (!node[c]) {
                    return false
                }
                node = node[c]
            }
            return node
        }

        startsWith(prefix) {
            return !!this.searchPro(prefix)
        }
    }

    const trie = new Trie()
    trie.insert('apple')
    console.log(trie)
    console.log(trie.search('apple'), 'search')
    console.log(trie.startsWith('app'), 'startsWith')
    console.log(trie.startsWith('appp'), 'startsWith')
    console.log(trie.startsWith('applea'), 'startsWith')
    console.log(trie.search('app'), 'search')
    trie.insert('app')
    console.log(trie.search('app'), 'search')
</script>